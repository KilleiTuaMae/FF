import{a as ne}from"./chunk-YDNJ2WB2.js";import{a as W,c as q,d as H,j as J,l as K,m as Q,n as U,o as X,p as Y,q as Z,s as ee,t as te,x as ie}from"./chunk-YODU3OYW.js";import"./chunk-4ZHN5DEK.js";import"./chunk-QUJFQN2Y.js";import"./chunk-RKMDPVSI.js";import"./chunk-OQ2NBUQ5.js";import"./chunk-ZEOY7T7S.js";import"./chunk-SWY7PPUO.js";import"./chunk-VU6BZRVF.js";import"./chunk-GBD7M335.js";import"./chunk-7FY2OE2O.js";import"./chunk-MMMQHFET.js";import"./chunk-GA3BBT5K.js";import"./chunk-TSSAVJK6.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-NACS65YO.js";import"./chunk-CKP3SGE2.js";import"./chunk-24437W6R.js";import{$ as E,E as m,F as i,G as t,H as w,N as M,O as _,P as f,W as I,X as S,Y as o,Z as x,_ as b,aa as k,ba as T,ca as V,fa as C,fb as $,ga as F,gb as j,ha as h,j as g,ja as B,jb as D,k as d,ma as A,na as L,pa as R,q as l,s as O,sa as G,ta as N,u as P,ua as z,y as u}from"./chunk-MVW6VEH7.js";import"./chunk-LJSFQLFK.js";import"./chunk-YAB3BLXJ.js";import"./chunk-ITRQULCE.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-E2PI57JI.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function oe(n,a){if(n&1&&(i(0,"ion-item"),o(1),t()),n&2){let r=a.$implicit;l(),x(r)}}function ae(n,a){if(n&1&&(i(0,"ion-list"),u(1,oe,2,1,"ion-item",13),t()),n&2){let r=f();l(),m("ngForOf",r.sugestoes)}}function re(n,a){if(n&1){let r=M();i(0,"ion-item")(1,"ion-label")(2,"div")(3,"strong"),o(4),t()(),i(5,"div",15),o(6),t(),i(7,"div"),o(8),t()(),i(9,"ion-button",16),_("click",function(){let c=g(r).$implicit,s=f(2);return d(s.remover(c))}),o(10,"Remover"),t()()}if(n&2){let r=a.$implicit,e=f(2);S("border-left","6px solid "+e.getCategoriaColor(r.categoria)),l(4),x(r.descricao),l(2),E("",r.categoria," \u2014 ",r.data),l(2),x(e.formatCurrency(r.valor))}}function se(n,a){if(n&1&&(i(0,"ion-list"),u(1,re,11,6,"ion-item",14),t()),n&2){let r=f();l(),m("ngForOf",r.ultimos)}}function le(n,a){n&1&&(i(0,"p",17),o(1,"Nenhum gasto adicionado ainda."),t())}var xe=(()=>{let a=class a{constructor(e){this.gastosService=e,this.gastos=[],this.ultimos=[],this.totalMesAtual=0,this.mesAtual="",this.sugestoes=[],this.metamensal=0}ngOnInit(){this.mesAtual=new Date().toLocaleString("pt-BR",{month:"long"}),this.gastosService.gastos$.subscribe(e=>{this.gastos=e,this.totalMesAtual=this.gastosService.totalForMonth(),this.ultimos=e.slice(-5).reverse()})}formatCurrency(e){return(e??0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}getCategoriaColor(e){return this.gastosService.getCategoriaColor(e)}remover(e){this.gastosService.removerGastoByPredicate(c=>c.criadoEm===e.criadoEm&&c.descricao===e.descricao&&c.valor===e.valor)}gerarsugestoes(){this.sugestoes=["Reduzir gastos com transporte","Economizar em alimenta\xE7\xE3o","Avaliar compras sup\xE9rfluas"]}verfinancas(){alert(`Voc\xEA gastou ${this.formatCurrency(this.totalMesAtual)} este m\xEAs.`)}abrirpagina(e){alert(`Abrindo p\xE1gina: ${e}`)}editarmeta(e){this.metamensal=e,alert(`Meta mensal ajustada para: ${this.formatCurrency(e)}`)}};a.\u0275fac=function(c){return new(c||a)(O(ne))},a.\u0275cmp=P({type:a,selectors:[["app-opcoes"]],decls:28,vars:16,consts:[["semGastos",""],[3,"translucent"],["color","tertiary"],["slot","start"],[1,"ion-padding",3,"fullscreen"],[1,"titulo-pequeno"],[1,"total-mes"],["expand","block","color","primary",3,"click"],[4,"ngIf"],["expand","block","color","secondary",3,"click"],["type","number",3,"ngModelChange","ngModel"],["slot","end",3,"click"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"border-left",4,"ngFor","ngForOf"],[1,"muted"],["fill","clear","slot","end","color","danger",3,"click"],[1,"ion-text-center","muted"]],template:function(c,s){if(c&1){let p=M();i(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-buttons",3),w(3,"ion-menu-button"),t(),i(4,"ion-title"),o(5,"Op\xE7\xF5es"),t()()(),i(6,"ion-content",4)(7,"div",5),o(8),C(9,"titlecase"),t(),i(10,"div",6),o(11),C(12,"number"),C(13,"currency"),t(),i(14,"ion-button",7),_("click",function(){return g(p),d(s.gerarsugestoes())}),o(15,"Gerar Sugest\xF5es"),t(),u(16,ae,2,1,"ion-list",8),i(17,"ion-button",9),_("click",function(){return g(p),d(s.verfinancas())}),o(18,"Ver Finan\xE7as"),t(),i(19,"ion-item")(20,"ion-label"),o(21,"Meta Mensal"),t(),i(22,"ion-input",10),V("ngModelChange",function(y){return g(p),T(s.metamensal,y)||(s.metamensal=y),d(y)}),t(),i(23,"ion-button",11),_("click",function(){return g(p),d(s.editarmeta(s.metamensal))}),o(24,"Salvar Meta"),t()(),u(25,se,2,1,"ion-list",12)(26,le,2,0,"ng-template",null,0,B),t()}if(c&2){let p=I(27);m("translucent",!0),l(6),m("fullscreen",!0),l(2),b("Gastos de ",F(9,8,s.mesAtual)),l(3),b("Total: ",h(13,13,h(12,10,s.totalMesAtual,"1.2-2"),"BRL")),l(5),m("ngIf",s.sugestoes.length>0),l(6),k("ngModel",s.metamensal),l(3),m("ngIf",s.ultimos.length>0)("ngIfElse",p)}},dependencies:[ie,q,H,J,K,Q,U,X,Y,Z,ee,te,W,z,A,L,D,$,j,G,R,N],styles:[".page-opcoes[_ngcontent-%COMP%]{--ion-background-color: #fafafa}.summary-card[_ngcontent-%COMP%]{margin-bottom:12px}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;align-items:center}.big[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.meta-box[_ngcontent-%COMP%]{text-align:right;min-width:180px}.meta-value[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:var(--ion-color-primary)}.meta-edit[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:8px;align-items:center}.add-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:10px}.add-row[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .add-row[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:160px}.familia-summary[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:8px;flex-wrap:wrap}.sugestoes[_ngcontent-%COMP%]   ion-item.aplicada[_ngcontent-%COMP%]{background:#4caf500f;border-left:4px solid rgba(76,175,80,.8)}.snap-item[_ngcontent-%COMP%]{padding:6px 0}.muted[_ngcontent-%COMP%]{color:#00000080;font-size:.9rem}"]});let n=a;return n})();export{xe as OpcoesPage};
