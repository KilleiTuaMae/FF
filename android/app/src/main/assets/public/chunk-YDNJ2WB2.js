import{a as n,e as c}from"./chunk-MVW6VEH7.js";import{a as e,b as i}from"./chunk-JHI3MBHO.js";var g="meus_gastos_v1",l={Alimenta\u00E7\u00E3o:"#FF6384",Casa:"#36A2EB",Compras:"#FFCE56",Transporte:"#4BC0C0",Sa\u00FAde:"#9966FF",Outros:"#FF9F40"},u=(()=>{let o=class o{constructor(){this.gastos=[],this.gastosSubject=new n([]),this.gastos$=this.gastosSubject.asObservable(),this.isGastoThisMonth=t=>{let s=new Date,a=new Date(t.criadoEm);return a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()},this.carregarGastos()}carregarGastos(){try{let t=localStorage.getItem(g);if(t){let s=JSON.parse(t);Array.isArray(s)&&(this.gastos=s.map(a=>({descricao:a.descricao,valor:Number(a.valor),categoria:a.categoria,data:a.data,criadoEm:a.criadoEm})).sort((a,h)=>new Date(h.criadoEm).getTime()-new Date(a.criadoEm).getTime()))}}catch(t){console.error("Erro ao carregar gastos do localStorage",t),this.gastos=[]}this.gastosSubject.next(this.gastos)}_salvar(){localStorage.setItem(g,JSON.stringify(this.gastos)),this.gastosSubject.next(this.gastos)}adicionarGasto(t){let s=new Date,a=i(e({},t),{data:s.toISOString().substring(0,10),criadoEm:s.toISOString()});this.gastos.unshift(a),this._salvar()}removerGastoByPredicate(t){let s=this.gastos.length;this.gastos=this.gastos.filter(a=>!t(a)),this.gastos.length<s&&this._salvar()}getAll(){return[...this.gastos]}totalForMonth(){return this.gastos.filter(this.isGastoThisMonth).reduce((t,s)=>t+s.valor,0)}totalsByCategoryForMonth(){let t={};return this.gastos.filter(this.isGastoThisMonth).forEach(s=>{t[s.categoria]=(t[s.categoria]||0)+s.valor}),t}getCategoriaColor(t){return l[t]||"#6c757d"}};o.\u0275fac=function(s){return new(s||o)},o.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{u as a};
